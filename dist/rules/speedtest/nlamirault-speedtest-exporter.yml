groups:

- name: NlamiraultSpeedtestExporter

  rules:

    - alert: SpeedtestSlowInternetDownload
      expr: 'avg_over_time(speedtest_download[10m]) < 100'
      for: 0m
      labels:
        severity: warning
      annotations:
        summary: "{% if $labels.alias %}{{ $labels.alias }}{% else %}{{ $labels.instance }}: SpeedTest Slow Internet Download"
        description: "Internet download speed is currently {{humanize $value}} Mbps.\nVALUE = {{ $value }}\n{{ range $k, $v := $labels }}{{ $k }}=\"{{ $v }}\" {{ end }}"

    - alert: SpeedtestSlowInternetUpload
      expr: 'avg_over_time(speedtest_upload[10m]) < 20'
      for: 0m
      labels:
        severity: warning
      annotations:
        summary: "{% if $labels.alias %}{{ $labels.alias }}{% else %}{{ $labels.instance }}: SpeedTest Slow Internet Upload"
        description: "Internet upload speed is currently {{humanize $value}} Mbps.\nVALUE = {{ $value }}\n{{ range $k, $v := $labels }}{{ $k }}=\"{{ $v }}\" {{ end }}"

