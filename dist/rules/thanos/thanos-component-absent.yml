groups:

- name: ThanosComponentAbsent

  rules:

    - alert: ThanosCompactIsDown
      expr: 'absent(up{job=~".*thanos-compact.*"} == 1)'
      for: 5m
      labels:
        severity: critical
      annotations:
        summary: "{% if $labels.alias %}{{ $labels.alias }}{% else %}{{ $labels.instance }}: Thanos Compact Is Down"
        description: "ThanosCompact has disappeared. Prometheus target for the component cannot be discovered.\nVALUE = {{ $value }}\n{{ range $k, $v := $labels }}{{ $k }}=\"{{ $v }}\" {{ end }}"

    - alert: ThanosQueryIsDown
      expr: 'absent(up{job=~".*thanos-query.*"} == 1)'
      for: 5m
      labels:
        severity: critical
      annotations:
        summary: "{% if $labels.alias %}{{ $labels.alias }}{% else %}{{ $labels.instance }}: Thanos Query Is Down"
        description: "ThanosQuery has disappeared. Prometheus target for the component cannot be discovered.\nVALUE = {{ $value }}\n{{ range $k, $v := $labels }}{{ $k }}=\"{{ $v }}\" {{ end }}"

    - alert: ThanosReceiveIsDown
      expr: 'absent(up{job=~".*thanos-receive.*"} == 1)'
      for: 5m
      labels:
        severity: critical
      annotations:
        summary: "{% if $labels.alias %}{{ $labels.alias }}{% else %}{{ $labels.instance }}: Thanos Receive Is Down"
        description: "ThanosReceive has disappeared. Prometheus target for the component cannot be discovered.\nVALUE = {{ $value }}\n{{ range $k, $v := $labels }}{{ $k }}=\"{{ $v }}\" {{ end }}"

    - alert: ThanosRuleIsDown
      expr: 'absent(up{job=~".*thanos-rule.*"} == 1)'
      for: 5m
      labels:
        severity: critical
      annotations:
        summary: "{% if $labels.alias %}{{ $labels.alias }}{% else %}{{ $labels.instance }}: Thanos Rule Is Down"
        description: "ThanosRule has disappeared. Prometheus target for the component cannot be discovered.\nVALUE = {{ $value }}\n{{ range $k, $v := $labels }}{{ $k }}=\"{{ $v }}\" {{ end }}"

    - alert: ThanosSidecarIsDown
      expr: 'absent(up{job=~".*thanos-sidecar.*"} == 1)'
      for: 5m
      labels:
        severity: critical
      annotations:
        summary: "{% if $labels.alias %}{{ $labels.alias }}{% else %}{{ $labels.instance }}: Thanos Sidecar Is Down"
        description: "ThanosSidecar has disappeared. Prometheus target for the component cannot be discovered.\nVALUE = {{ $value }}\n{{ range $k, $v := $labels }}{{ $k }}=\"{{ $v }}\" {{ end }}"

    - alert: ThanosStoreIsDown
      expr: 'absent(up{job=~".*thanos-store.*"} == 1)'
      for: 5m
      labels:
        severity: critical
      annotations:
        summary: "{% if $labels.alias %}{{ $labels.alias }}{% else %}{{ $labels.instance }}: Thanos Store Is Down"
        description: "ThanosStore has disappeared. Prometheus target for the component cannot be discovered.\nVALUE = {{ $value }}\n{{ range $k, $v := $labels }}{{ $k }}=\"{{ $v }}\" {{ end }}"

